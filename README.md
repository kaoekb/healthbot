# Telegram Health Tracker Bot

Бот для учёта сахара и артериального давления c напоминаниями, подтверждением ввода и генерацией PDF-отчётов (неделя/месяц/всё время). Основан на **aiogram v3**, хранение — **SQLite (aiosqlite)**, графики — **matplotlib**.

## Возможности
- /start → меню: «Изменить измеряемые», «Ввести данные», «Получить выписку», «Отключить уведомления», «Выбрать часовой пояс»
- Выбор метрик: сахар, давление или оба; опция «измерять одновременно»
- Выбор времени из предустановленных слотов: 08:00, 10:00, 12:00, 14:00, 17:00, 19:00, 21:00 (мультивыбор)
- Персональный часовой пояс пользователя (по умолчанию — Санкт‑Петербург/Москва). Напоминания приходят по **локальному** времени пользователя.
- Напоминания с инлайн‑кнопкой «Ввести данные»
- Ввод с валидацией и подтверждением: сахар (число), давление (три числа «САД ДАД Пульс»)
- Выписка: средние за 7 дней + PDF с графиками за 7/30 дней и всё время
- Докер: один контейнер, volume для БД и отчётов

## Запуск
```bash
cp .env.example .env  # впишите BOT_TOKEN
docker compose up -d --build
```

## Таймзона
- По умолчанию — `Europe/Moscow`. В меню добавлена кнопка **«Выбрать часовой пояс»**. Диалог показывает текущее время в СПб и у пользователя и предлагает быстрый выбор: Калининград (−1), Самара (+1), Екатеринбург (+2), Омск (+3), Новосибирск (+4), Красноярск (+4), Иркутск (+5), Якутск (+6), Владивосток (+7), Магадан (+8), Камчатка (+9).

## Примечания
- Планировщик учитывает часовой пояс каждого пользователя и отправляет одно напоминание на слот «дата+время» в локальном календаре пользователя.
- Метки времени измерений сохраняются в БД в **UTC** (ISO, `+00:00`) для корректной аналитики.
